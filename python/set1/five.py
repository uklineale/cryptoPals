#Implement repeating key xor, seems easy
import binascii
import sys

testPt = '''Burning 'em, if you ain't quick and nimble \n
I go crazy when I hear a cymbal'''.encode('ascii')
testKey = 'ICE'.encode('ascii')
testCt = '''0b3637272a2b2e63622c2e69692a23693a2a3c6324202d623d63343c2a26226324272765272
a282b2f20430a652e2c652a3124333a653e2b2027630c692b20283165286326302e27282f'''

testPt1 = binascii.unhexlify('4b451243411817030a060400564c0a10000f191b0d014c0e16481104094f0b0a01010e06014c05011c001e1c1d0d11091e4f0e0a1e4c03070205024f1b0d0900031b4b664f4f3c0d051f4f0e0c00094f01164c02001c451e090e0c450e154f0a041f0447594c404c060e451243410a041f04301817030a0604004c031d481b43420d091604330307020502654b450914061b111f42654b451f090a484a191f1d4716040d1d0d4a08030c47070d1f074700140d021809091f401b110d1e1b1d15410a0604001f4c0907174c091709081c000a1b4b664f4f1c0d094c090109091f4f0917094c0307060d180a0c4505024f1c0d094c0d091604410b07064c1c0e0b0e0d0b0a466f664f4f1c0d094c0b0d030d19031c4519010e1b0e4c051c481609184f010b4c430a1c06431c1d070305000a53450a031d481609181b010b0b4c1b00004c1902091607664c4803031e4f1b16044c03070205021c444505021c1c0400004f090b084c0c070b0a05081d17094c1b00004c00060a150d01421d080d1f0448150d0f0409020942654b10010d1c03455c5e5d626f4f4c060e451e1901060c020b4f0a041f046501034c374f450b4c4e4b2a243f24303e203e3f26272b4e4c32534518040a066f4c4c4f48464c05010b0919080a484b0e0d1c00170f4c060e4505184f0d1d051f1b1b6f4c4c4f480c0a4c3448480a4c4d4c2d23212a474b0e0d1c00170f4e4f355e4c18070d0b6665414847482420252043420d0916041e0c4a6f4c4c4f4803056609016f664f4f1b00184c3f2931244c1c074505184f010b0f001a0c001f4c1a1b001e4b1c48151e05190911094c0d010b4c08061a000f18001a0c091f6538243824524a412423222d4a0e050152412423222d4a4200000b0400430d010b56483f2931244e65').decode('utf-8')
testKey1 = 'hello'.encode('ascii')

# Takes a plaintext and a key.
# Returns ciphertext
def repeatingKeyXor(pt, key):
    keyLen = len(key)
    xor = []
    for i in range(0,len(pt)):
        xor.append(ord(pt[i]) ^ ord(key[i % keyLen]))

    return bytes(xor)

def repeatingKeyXorToHex(bytez):
    return binascii.b2a_hex(bytez)

def main(filename, key):
    with open(filename) as f:
        pt = f.read()
        bytez = repeatingKeyXor(pt, key)
        ct = repeatingKeyXorToHex(bytez)
        print(ct)

main(sys.argv[1], sys.argv[2])